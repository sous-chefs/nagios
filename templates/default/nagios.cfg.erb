# Autogenerated by Chef.

log_file=<%= node['nagios']['log_dir'] %>/<%= node['nagios']['server']['name'] %>.log

admin_email=<%= node['nagios']['sysadmin_email'] %>
admin_pager=<%= node['nagios']['sysadmin_sms_email'] %>

cfg_dir=<%= node['nagios']['config_dir'] %>

object_cache_file=<%= node['nagios']['cache_dir'] %>/objects.cache
precached_object_file=<%= node['nagios']['cache_dir'] %>/objects.precache

resource_file=<%= node['nagios']['resource_dir'] %>/resource.cfg
status_file=<%= node['nagios']['cache_dir'] %>/status.dat
status_update_interval=10
<%= node['nagios']['server']['name'] %>_user=<%= node['nagios']['user'] %>
<%= node['nagios']['server']['name'] %>_group=<%= node['nagios']['group'] %>
check_external_commands=<%= nagios_boolean(node['nagios']['check_external_commands']) %>

# NOTE: Setting this value to -1 causes Nagios to check the external command file as often as possible.
command_check_interval=-1

command_file=<%= node['nagios']['state_dir'] %>/rw/<%= node['nagios']['server']['name'] %>.cmd
external_command_buffer_slots=4096
lock_file=<%= node['nagios']['run_dir'] %>/<%= node['nagios']['server']['vname'] %>.pid
temp_file=<%= node['nagios']['cache_dir'] %>/<%= node['nagios']['server']['name'] %>.tmp
temp_path=/tmp
event_broker_options=-1
<% node['nagios']['brokers'].each do |brokerPath, brokerConfig| -%>
broker_module=<%= brokerPath %> <%= brokerConfig %>
<% end -%>

log_rotation_method=d
log_archive_path=<%= node['nagios']['log_dir'] %>/archives
use_syslog=1
log_notifications=1
log_service_retries=1
log_host_retries=1
log_event_handlers=1
log_initial_states=0
log_external_commands=1
log_passive_checks=1

service_inter_check_delay_method=s
max_service_check_spread=<%= node['nagios']['conf']['max_service_check_spread'] %>
service_interleave_factor=s
host_inter_check_delay_method=s
max_host_check_spread=<%= node['nagios']['conf']['max_host_check_spread'] %>
max_concurrent_checks=0
check_result_reaper_frequency=10
max_check_result_reaper_time=30
check_result_path=<%= node['nagios']['state_dir'] %>/spool/checkresults
max_check_result_file_age=3600
cached_host_check_horizon=15
cached_service_check_horizon=15
enable_predictive_host_dependency_checks=1
enable_predictive_service_dependency_checks=1
soft_state_dependencies=0

auto_reschedule_checks=0
auto_rescheduling_interval=30
auto_rescheduling_window=180

sleep_time=0.25
service_check_timeout=<%= node['nagios']['conf']['service_check_timeout'] %>
host_check_timeout=<%= node['nagios']['conf']['host_check_timeout'] %>
event_handler_timeout=30
notification_timeout=30
ocsp_timeout=5
perfdata_timeout=5

retain_state_information=1
state_retention_file=<%= node['nagios']['state_dir'] %>/retention.dat
retention_update_interval=60
use_retained_program_state=1
use_retained_scheduling_info=1
retained_host_attribute_mask=0
retained_service_attribute_mask=0
retained_process_host_attribute_mask=0
retained_process_service_attribute_mask=0
retained_contact_host_attribute_mask=0
retained_contact_service_attribute_mask=0

interval_length=<%= node['nagios']['interval_length'] %>

use_aggressive_host_checking=0

execute_service_checks=<%= node['nagios']['execute_service_checks'] %>
accept_passive_service_checks=<%= node['nagios']['accept_passive_service_checks'] %>
execute_host_checks=<%= node['nagios']['execute_host_checks'] %>
accept_passive_host_checks=<%= node['nagios']['accept_passive_host_checks'] %>

enable_notifications=<%= node['nagios']['notifications_enabled'] %>
enable_event_handlers=1

process_performance_data=<%= node['nagios']['conf']['process_performance_data'] %>

<%= "host_perfdata_command=#{node['nagios']['conf']['host_perfdata_command']}" unless node['nagios']['conf']['host_perfdata_command'].nil? %>
<%= "host_perfdata_file=#{node['nagios']['conf']['host_perfdata_file']}" unless node['nagios']['conf']['host_perfdata_file'].nil? %>
<%= "host_perfdata_file_template=#{node['nagios']['conf']['host_perfdata_file_template']}" unless node['nagios']['conf']['host_perfdata_file_template'].nil? %>
<%= "host_perfdata_file_mode=#{node['nagios']['conf']['host_perfdata_file_mode']}" unless node['nagios']['conf']['host_perfdata_file_mode'].nil? %>
<%= "host_perfdata_file_processing_interval=#{node['nagios']['conf']['host_perfdata_file_processing_interval']}" unless node['nagios']['conf']['host_perfdata_file_processing_interval'].nil? %>
<%= "host_perfdata_file_processing_command=#{node['nagios']['conf']['host_perfdata_file_processing_command']}" unless node['nagios']['conf']['host_perfdata_file_processing_command'].nil? %>

<%= "service_perfdata_command=#{node['nagios']['conf']['service_perfdata_command']}" unless node['nagios']['conf']['service_perfdata_command'].nil? %>
<%= "service_perfdata_file=#{node['nagios']['conf']['service_perfdata_file']}" unless node['nagios']['conf']['service_perfdata_file'].nil? %>
<%= "service_perfdata_file_template=#{node['nagios']['conf']['service_perfdata_file_template']}" unless node['nagios']['conf']['service_perfdata_file_template'].nil? %>
<%= "service_perfdata_file_mode=#{node['nagios']['conf']['service_perfdata_file_mode']}" unless node['nagios']['conf']['service_perfdata_file_mode'].nil? %>
<%= "service_perfdata_file_processing_interval=#{node['nagios']['conf']['service_perfdata_file_processing_interval']}" unless node['nagios']['conf']['service_perfdata_file_processing_interval'].nil? %>
<%= "service_perfdata_file_processing_command=#{node['nagios']['conf']['service_perfdata_file_processing_command']}" unless node['nagios']['conf']['service_perfdata_file_processing_command'].nil? %>

obsess_over_services=<%= node['nagios']['obsess_over_services'] %>
<% if node['nagios']['ocsp_command'] -%>
ocsp_command=<%= node['nagios']['ocsp_command'] %>
<% else -%>
#ocsp_command=somecommand
<% end -%>
obsess_over_hosts=<%= node['nagios']['obsess_over_hosts'] %>
<% if node['nagios']['ochp_command'] -%>
ochp_command=<%= node['nagios']['ochp_command'] %>
<% else -%>
#ochp_command=somecommand
<% end -%>
translate_passive_host_checks=0
passive_host_checks_are_soft=0
check_for_orphaned_services=1
check_for_orphaned_hosts=1
check_service_freshness=1
service_freshness_check_interval=60
check_host_freshness=0
host_freshness_check_interval=60
additional_freshness_latency=15
<% if node['nagios']['server']['install_method'] == 'source' -%>allow_empty_hostgroup_assignment=1<% end -%>

enable_flap_detection=1
low_service_flap_threshold=5.0
high_service_flap_threshold=20.0
low_host_flap_threshold=5.0
high_host_flap_threshold=20.0

date_format=<%= node['nagios']['conf']['date_format'] %>

use_timezone=<%= node['nagios']['timezone'] %>
<% if node['nagios']['conf']['p1_file'] %>
p1_file=<%= node['nagios']['conf']['p1_file'] %>
<% end %>
enable_embedded_perl=1
use_embedded_perl_implicitly=1

illegal_object_name_chars=`~!$%^&*|'"<>?,()=
illegal_macro_output_chars=`~$&|'"<>

use_regexp_matching=<%= node['nagios']['regexp_matching'] %>
use_true_regexp_matching=0

daemon_dumps_core=0

use_large_installation_tweaks=<%= node['nagios']['large_installation_tweaks'] %>

enable_environment_macros=1

#free_child_process_memory=1
#child_processes_fork_twice=1

debug_level=<%= node['nagios']['conf']['debug_level'] %>
debug_verbosity=<%= node['nagios']['conf']['debug_verbosity']%>
debug_file=<%= node['nagios']['conf']['debug_file'] %>
max_debug_file_size=1000000
